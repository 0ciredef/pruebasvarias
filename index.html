<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>Decisi√≥n importante</title>

<style>
* {
  box-sizing: border-box;
  font-family: system-ui, sans-serif;
  touch-action: manipulation;
}

body {
  margin: 0;
  height: 100dvh;
  background: linear-gradient(135deg, #ffdde1, #ee9ca7);
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

.container {
  width: 100%;
  max-width: 380px;
  height: 100%;
  padding: 12px;
  display: flex;
  flex-direction: column;
}

h1 {
  text-align: center;
  font-size: 1.4rem;
  margin: 8px 0;
}

#playfield {
  position: relative;
  flex: 1;
  background: rgba(255,255,255,0.35);
  border-radius: 16px;
  overflow: hidden;
}

/* BOTONES */
button {
  position: absolute;
  border: none;
  border-radius: 12px;
  padding: 14px 18px;
  font-size: 1rem;
  user-select: none;
}

#yes {
  background: #4caf50;
  color: white;
  left: 50%;
  bottom: 10px;
  transform: translateX(-50%);
  z-index: 20;
}

.no {
  background: #f44336;
  color: white;
}

.fake {
  background: #666;
  color: #eee;
}

#status {
  text-align: center;
  font-size: 0.85rem;
  margin-top: 6px;
}
</style>
</head>

<body>
<div class="container">
  <h1>¬øQuieres ver a Fede el 7 de febrero?</h1>

  <div id="playfield">
    <button id="yes">S√≠ üíñ</button>
  </div>

  <div id="status">Nivel 1</div>
</div>

<script>
const field = document.getElementById("playfield");
const yesBtn = document.getElementById("yes");
const status = document.getElementById("status");

let level = 1;
let attempts = 0;
let noBtn;
let vx = 1.4, vy = 1.4;
let x = 40, y = 40;
let bouncing = false;

const frases = [
  "¬øSeguro? üòè",
  "La basiquita de Raquel üòå",
  "Ni el Xbox por 1 peso üéÆ",
  "Ping pong: destrucci√≥n üèì",
  "Otra derrota üòé"
];

/* ---------- UTILIDADES ---------- */
function vibrar() {
  if (navigator.vibrate) navigator.vibrate(40);
}

function clearField() {
  [...field.querySelectorAll(".no, .fake")].forEach(e => e.remove());
  bouncing = false;
}

function limits(btn) {
  return {
    maxX: field.clientWidth - btn.offsetWidth,
    maxY: field.clientHeight - btn.offsetHeight - 60
  };
}

function place(btn) {
  const { maxX, maxY } = limits(btn);
  btn.style.left = Math.random() * maxX + "px";
  btn.style.top = Math.random() * maxY + "px";
}

/* ---------- NO CL√ÅSICO ---------- */
function spawnNo() {
  noBtn = document.createElement("button");
  noBtn.className = "no";
  noBtn.textContent = "No üôÉ";
  place(noBtn);

  noBtn.addEventListener("pointerdown", onNo);
  field.appendChild(noBtn);
}

function dvdBounce() {
  if (bouncing) return;
  bouncing = true;

  function move() {
    if (!noBtn) return;
    const { maxX, maxY } = limits(noBtn);

    x += vx;
    y += vy;

    if (x <= 0 || x >= maxX) vx *= -1;
    if (y <= 0 || y >= maxY) vy *= -1;

    noBtn.style.left = x + "px";
    noBtn.style.top = y + "px";

    requestAnimationFrame(move);
  }
  move();
}

/* ---------- EVENTO NO ---------- */
function onNo() {
  attempts++;
  vibrar();
  noBtn.textContent = frases[Math.floor(Math.random() * frases.length)];

  if (attempts === 2) level = 2;
  if (attempts === 4) level = 3;
  if (attempts === 6) level = 4;
  if (attempts === 8) level = 5;
  if (attempts === 10) level = 6;

  status.textContent = `Nivel ${level}`;
  yesBtn.style.transform =
    `translateX(-50%) scale(${1 + attempts * 0.06})`;

  if (level === 1) place(noBtn);

  if (level === 2) {
    place(noBtn);
    place(noBtn);
  }

  if (level === 3) {
    vx *= 1.2; vy *= 1.2;
    dvdBounce();
  }

  if (level === 4) {
    noBtn.style.transform = `scale(${0.9 - attempts * 0.02})`;
    vx *= 1.3;
  }

  if (level === 5) {
    const fake = noBtn.cloneNode(true);
    fake.className = "fake";
    place(fake);
    fake.addEventListener("pointerdown", () => fake.remove());
    field.appendChild(fake);
  }

  if (level === 6) startMiniGames();
}

/* ---------- MINIJUEGOS ---------- */
function startMiniGames() {
  clearField();
  status.textContent = "Nivel 6 ‚Äì Desbloquea el NO";
  miniDoors();
}

/* NIVEL 6: PUERTAS */
function miniDoors() {
  let opened = 0;

  for (let i = 0; i < 4; i++) {
    const door = document.createElement("button");
    door.className = "fake";
    door.textContent = "¬øNO?";
    place(door);

    door.addEventListener("pointerdown", () => {
      vibrar();
      door.remove();
      opened++;
      if (opened === 3) miniPath();
    });

    field.appendChild(door);
  }
}

/* NIVEL 7: CAMINO */
function miniPath() {
  clearField();
  status.textContent = "Nivel 7 ‚Äì En orden";

  let index = 0;

  for (let i = 0; i < 3; i++) {
    const step = document.createElement("button");
    step.className = "fake";
    step.textContent = i + 1;
    place(step);

    step.addEventListener("pointerdown", () => {
      if (i === index) {
        step.remove();
        index++;
        vibrar();
        if (index === 3) miniTime();
      } else {
        miniPath();
      }
    });

    field.appendChild(step);
  }
}

/* NIVEL 8: TIEMPO */
function miniTime() {
  clearField();
  status.textContent = "Nivel 8 ‚Äì R√°pido üòà";

  setTimeout(() => {
    const finalNo = document.createElement("button");
    finalNo.className = "no";
    finalNo.textContent = "No üôÉ";
    place(finalNo);

    finalNo.addEventListener("pointerdown", () => {
      alert("Ok, ganaste üòÇ pero igual sabes la respuesta üíñ");
    });

    field.appendChild(finalNo);

    setTimeout(() => finalNo.remove(), 900);
  }, 500);
}

/* ---------- INICIO ---------- */
spawnNo();

yesBtn.addEventListener("pointerdown", () => {
  alert("Sab√≠a que dir√≠as que s√≠ üíñüòå");
});
</script>
</body>
</html>
