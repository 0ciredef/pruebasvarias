<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>Pregunta importante</title>

<style>
* {
  box-sizing: border-box;
  touch-action: manipulation;
  font-family: system-ui, sans-serif;
}

body {
  margin: 0;
  height: 100dvh;
  background: linear-gradient(135deg, #ffdde1, #ee9ca7);
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

.container {
  width: 100%;
  max-width: 360px;
  padding: 16px;
  text-align: center;
}

h1 {
  font-size: 1.5rem;
  margin-bottom: 12px;
}

#game {
  position: relative;
  width: 100%;
  height: 300px;
  border-radius: 16px;
  background: rgba(255,255,255,0.3);
  overflow: hidden;
}

button {
  position: absolute;
  padding: 14px 20px;
  font-size: 1rem;
  border-radius: 12px;
  border: none;
  user-select: none;
}

#yes {
  background: #4caf50;
  color: white;
  left: 50%;
  bottom: 10px;
  transform: translateX(-50%);
  z-index: 10;
}

.no {
  background: #f44336;
  color: white;
}

#counter {
  margin-top: 10px;
  font-size: 0.9rem;
}
</style>
</head>

<body>
<div class="container">
  <h1>Â¿Quieres ver a Fede el 7 de febrero?</h1>

  <div id="game">
    <button id="yes">SÃ­ ğŸ’–</button>
    <button id="no" class="no">No ğŸ™ƒ</button>
  </div>

  <div id="counter">Nivel: 1</div>
</div>

<script>
const game = document.getElementById("game");
const noBtn = document.getElementById("no");
const yesBtn = document.getElementById("yes");
const counter = document.getElementById("counter");

let level = 1;
let attempts = 0;
let x = 40, y = 40;
let vx = 1.5, vy = 1.5;
let bouncing = false;

const frases = [
  "Â¿Seguro? ğŸ˜",
  "La basiquita de Raquel ğŸ˜Œ",
  "Ni el Xbox por 1 peso ğŸ®",
  "Ping pong: destrucciÃ³n ğŸ“",
  "Otra derrota ğŸ˜"
];

function vibrar() {
  if (navigator.vibrate) navigator.vibrate(50);
}

function limites(btn = noBtn) {
  return {
    maxX: game.clientWidth - btn.offsetWidth,
    maxY: game.clientHeight - btn.offsetHeight - 50
  };
}

function moveTo(nx, ny, btn = noBtn) {
  const { maxX, maxY } = limites(btn);
  x = Math.max(0, Math.min(nx, maxX));
  y = Math.max(0, Math.min(ny, maxY));
  btn.style.left = x + "px";
  btn.style.top = y + "px";
}

function randomMove(btn = noBtn) {
  const { maxX, maxY } = limites(btn);
  moveTo(Math.random() * maxX, Math.random() * maxY, btn);
}

function dvd() {
  if (bouncing) return;
  bouncing = true;

  function tick() {
    const { maxX, maxY } = limites();
    x += vx;
    y += vy;

    if (x <= 0 || x >= maxX) vx *= -1;
    if (y <= 0 || y >= maxY) vy *= -1;

    moveTo(x, y);
    requestAnimationFrame(tick);
  }
  tick();
}

function spawnFake() {
  const fake = noBtn.cloneNode(true);
  fake.style.opacity = 0.6;
  randomMove(fake);
  fake.addEventListener("pointerdown", () => fake.remove());
  game.appendChild(fake);
}

function onNo() {
  attempts++;
  vibrar();
  noBtn.textContent = frases[Math.floor(Math.random() * frases.length)];

  if (attempts === 2) level = 2;
  if (attempts === 4) level = 3;
  if (attempts === 6) level = 4;
  if (attempts === 8) level = 5;

  counter.textContent = `Nivel: ${level}`;
  yesBtn.style.transform =
    `translateX(-50%) scale(${1 + attempts * 0.08})`;

  if (level === 1) randomMove();

  if (level === 2) {
    randomMove();
    randomMove();
  }

  if (level === 3) {
    vx *= 1.2;
    vy *= 1.2;
    dvd();
  }

  if (level === 4) {
    // Laberinto: solo horizontal
    y = game.clientHeight / 2 - noBtn.offsetHeight;
    moveTo(Math.random() * limites().maxX, y);
  }

  if (level === 5) {
    spawnFake();
    vx *= 1.3;
  }
}

noBtn.addEventListener("pointerdown", onNo);

yesBtn.addEventListener("pointerdown", () => {
  alert("SabÃ­a que dirÃ­as que sÃ­ ğŸ’–ğŸ˜Œ");
});
</script>
</body>
</html>
