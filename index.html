<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Decisi√≥n Importante</title>

<style>
* {
  box-sizing: border-box;
  font-family: system-ui, sans-serif;
  touch-action: none;
}

body {
  margin: 0;
  height: 100dvh;
  background: #0f0f0f;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

.container {
  width: 100%;
  max-width: 390px;
  height: 100%;
  padding: 12px;
  display: flex;
  flex-direction: column;
}

h1 {
  color: white;
  font-size: 1.4rem;
  text-align: center;
  margin: 10px 0;
}

#game {
  flex: 1;
  background: #1c1c1c;
  border-radius: 16px;
  position: relative;
  overflow: hidden;
}

button {
  border: none;
  border-radius: 14px;
  padding: 14px 18px;
  font-size: 1rem;
  position: absolute;
}

#yes {
  background: #4caf50;
  color: white;
  left: 50%;
  bottom: 14px;
  transform: translateX(-50%);
  z-index: 20;
}

.no {
  background: #f44336;
  color: white;
}

.fake {
  background: #555;
  color: #bbb;
}

#info {
  color: #aaa;
  text-align: center;
  font-size: 0.85rem;
  margin-top: 6px;
}

/* CONFETI */
.confetti {
  position: absolute;
  width: 8px;
  height: 8px;
  background: hsl(var(--h), 90%, 60%);
  animation: fall 2s linear infinite;
}

@keyframes fall {
  from { transform: translateY(-10px) rotate(0); }
  to { transform: translateY(110vh) rotate(360deg); }
}

/* LABERINTO */
#player {
  width: 20px;
  height: 20px;
  background: white;
  border-radius: 50%;
  position: absolute;
  z-index: 5;
}
.wall {
  position: absolute;
  background: #333;
}
.trap {
  position: absolute;
  background: #4caf50;
  opacity: 0.8;
}
</style>
</head>

<body>
<div class="container">
  <h1>¬øQuieres ver a Fede el 7 de febrero?</h1>
  <div id="game"></div>
  <div id="info"></div>
</div>

<script>
const game = document.getElementById("game");
const info = document.getElementById("info");

let level = 1;
let noBtn;

function clearGame() {
  game.innerHTML = "";
}

function vibrar() {
  navigator.vibrate?.(40);
}

function limits(el) {
  return {
    x: game.clientWidth - el.offsetWidth,
    y: game.clientHeight - el.offsetHeight - 70
  };
}

function place(el) {
  const l = limits(el);
  el.style.left = Math.random() * l.x + "px";
  el.style.top = Math.random() * l.y + "px";
}

/* -------- CONFETI -------- */
function fiesta() {
  clearGame();
  info.textContent = "üéâ SAB√çA QUE DIR√çAS QUE S√ç üéâ";
  for (let i = 0; i < 120; i++) {
    const c = document.createElement("div");
    c.className = "confetti";
    c.style.left = Math.random() * 100 + "%";
    c.style.animationDelay = Math.random() * 2 + "s";
    c.style.setProperty("--h", Math.random() * 360);
    game.appendChild(c);
  }
}

/* -------- NO B√ÅSICO -------- */
function spawnNo(clickable = true) {
  noBtn = document.createElement("button");
  noBtn.className = "no";
  noBtn.textContent = "No üôÉ";
  place(noBtn);
  if (clickable) noBtn.onclick = nextLevel;
  game.appendChild(noBtn);
}

/* -------- NIVELES -------- */
function level1() {
  info.textContent = "Nivel 1";
  const yes = document.createElement("button");
  yes.id = "yes";
  yes.textContent = "S√≠ üíñ";
  yes.onclick = fiesta;
  game.appendChild(yes);

  noBtn = document.createElement("button");
  noBtn.className = "no";
  noBtn.textContent = "No";
  noBtn.style.left = "50%";
  noBtn.style.bottom = "70px";
  noBtn.style.transform = "translateX(-50%)";
  noBtn.onclick = nextLevel;
  game.appendChild(noBtn);
}

function level2() {
  info.textContent = "Nivel 2 ‚Äì Se mueve";
  spawnNo();
  noBtn.onpointerdown = () => {
    vibrar();
    place(noBtn);
  };
}

function level3() {
  info.textContent = "Nivel 3 ‚Äì Duplicado";
  for (let i = 0; i < 3; i++) {
    const f = document.createElement("button");
    f.className = "fake";
    f.textContent = "No?";
    place(f);
    f.onclick = () => f.remove();
    game.appendChild(f);
  }
  spawnNo();
}

function level4() {
  info.textContent = "Nivel 4 ‚Äì Desaparece";
  setInterval(() => {
    if (noBtn) noBtn.remove();
    spawnNo();
  }, 900);
}

function level5() {
  info.textContent = "Nivel 5 ‚Äì Puertas";
  let count = 0;
  for (let i = 0; i < 4; i++) {
    const d = document.createElement("button");
    d.className = "fake";
    d.textContent = "¬øNo?";
    place(d);
    d.onclick = () => {
      d.remove();
      if (++count === 3) spawnNo();
    };
    game.appendChild(d);
  }
}

function level6() {
  info.textContent = "Nivel 6 ‚Äì Tiempo";
  setTimeout(() => {
    spawnNo();
    setTimeout(() => noBtn?.remove(), 1000);
  }, 700);
}

function level7() {
  info.textContent = "Nivel 7 ‚Äì Laberinto";
  clearGame();

  const player = document.createElement("div");
  player.id = "player";
  player.style.left = "10px";
  player.style.top = "10px";
  game.appendChild(player);

  spawnNo(true);
  noBtn.style.left = "320px";
  noBtn.style.top = "520px";

  const walls = [
    [50,0,20,400],[100,200,250,20],[200,0,20,350]
  ];

  walls.forEach(w => {
    const wall = document.createElement("div");
    wall.className = "wall";
    wall.style.left = w[0]+"px";
    wall.style.top = w[1]+"px";
    wall.style.width = w[2]+"px";
    wall.style.height = w[3]+"px";
    game.appendChild(wall);
  });

  game.onpointermove = e => {
    player.style.left = e.offsetX + "px";
    player.style.top = e.offsetY + "px";

    const p = player.getBoundingClientRect();
    const n = noBtn.getBoundingClientRect();
    if (
      p.left < n.right &&
      p.right > n.left &&
      p.top < n.bottom &&
      p.bottom > n.top
    ) {
      nextLevel();
    }
  };
}

function nextLevel() {
  vibrar();
  clearGame();
  level++;
  if (level === 2) level2();
  else if (level === 3) level3();
  else if (level === 4) level4();
  else if (level === 5) level5();
  else if (level === 6) level6();
  else if (level === 7) level7();
  else alert("Ok ya‚Ä¶ imposible decir que no üòÇ");
}

/* START */
level1();
</script>
</body>
</html>
