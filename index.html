<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>DecisiÃ³n Importante</title>

<style>
* {
  box-sizing: border-box;
  font-family: system-ui, sans-serif;
  touch-action: manipulation;
}

body {
  margin: 0;
  height: 100dvh;
  background: #111;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

.container {
  width: 100%;
  max-width: 380px;
  height: 100%;
  padding: 12px;
  display: flex;
  flex-direction: column;
}

h1 {
  color: white;
  font-size: 1.4rem;
  text-align: center;
  margin: 10px 0;
}

#game {
  flex: 1;
  background: #222;
  border-radius: 16px;
  position: relative;
  overflow: hidden;
}

button {
  border: none;
  border-radius: 12px;
  padding: 14px 18px;
  font-size: 1rem;
  position: absolute;
  user-select: none;
}

#yes {
  background: #4caf50;
  color: white;
  left: 50%;
  bottom: 10px;
  transform: translateX(-50%);
  z-index: 20;
}

.no {
  background: #f44336;
  color: white;
}

.fake {
  background: #555;
  color: #aaa;
}

#info {
  color: #aaa;
  text-align: center;
  font-size: 0.85rem;
  margin-top: 6px;
}
</style>
</head>

<body>
<div class="container">
  <h1>Â¿Quieres ver a Fede el 7 de febrero?</h1>

  <div id="game">
    <button id="yes">SÃ­ ðŸ’–</button>
  </div>

  <div id="info">Nivel 6</div>
</div>

<script>
const game = document.getElementById("game");
const yesBtn = document.getElementById("yes");
const info = document.getElementById("info");

let level = 6;
let progress = 0;
let noBtn;

function clearGame() {
  [...game.querySelectorAll(".no, .fake")].forEach(b => b.remove());
  progress = 0;
}

function limits(btn) {
  return {
    maxX: game.clientWidth - btn.offsetWidth,
    maxY: game.clientHeight - btn.offsetHeight - 60
  };
}

function place(btn) {
  const { maxX, maxY } = limits(btn);
  btn.style.left = Math.random() * maxX + "px";
  btn.style.top = Math.random() * maxY + "px";
}

function vibrar() {
  if (navigator.vibrate) navigator.vibrate(40);
}

/* ---------- NIVEL 6: PUERTAS ---------- */
function level6() {
  clearGame();
  info.textContent = "Nivel 6 â€“ Encuentra el correcto";

  for (let i = 0; i < 4; i++) {
    const door = document.createElement("button");
    door.className = "fake";
    door.textContent = "Â¿NO?";
    place(door);

    door.addEventListener("pointerdown", () => {
      vibrar();
      door.remove();
      progress++;
      if (progress === 3) spawnNo();
    });

    game.appendChild(door);
  }
}

function spawnNo() {
  noBtn = document.createElement("button");
  noBtn.className = "no";
  noBtn.textContent = "No ðŸ™ƒ";
  place(noBtn);

  noBtn.addEventListener("pointerdown", nextLevel);
  game.appendChild(noBtn);
}

/* ---------- NIVEL 7: CAMINO ---------- */
function level7() {
  clearGame();
  info.textContent = "Nivel 7 â€“ Sigue el camino";
  const order = [0,1,2];
  let index = 0;

  order.forEach(i => {
    const step = document.createElement("button");
    step.className = "fake";
    step.textContent = i + 1;
    place(step);

    step.addEventListener("pointerdown", () => {
      if (i === order[index]) {
        step.remove();
        index++;
        vibrar();
        if (index === order.length) spawnNo();
      } else {
        level7();
      }
    });

    game.appendChild(step);
  });
}

/* ---------- NIVEL 8: TIEMPO ---------- */
function level8() {
  clearGame();
  info.textContent = "Nivel 8 â€“ RÃ¡pido ðŸ˜ˆ";

  setTimeout(() => {
    noBtn = document.createElement("button");
    noBtn.className = "no";
    noBtn.textContent = "No ðŸ™ƒ";
    place(noBtn);

    noBtn.addEventListener("pointerdown", nextLevel);
    game.appendChild(noBtn);

    setTimeout(() => {
      if (noBtn) noBtn.remove();
      level8();
    }, 1000);
  }, 600);
}

function nextLevel() {
  vibrar();
  level++;
  clearGame();

  if (level === 7) level7();
  else if (level === 8) level8();
  else {
    alert("Okâ€¦ ya basta ðŸ˜‚ SabÃ­a que dirÃ­as que sÃ­");
  }
}

yesBtn.addEventListener("pointerdown", () => {
  alert("SabÃ­a que dirÃ­as que sÃ­ ðŸ’–ðŸ˜Œ");
});

/* START */
level6();
</script>
</body>
</html>
